// PDF.js Minimal Implementation for WordPress PDF Signature
// This is a simplified version for demo purposes
// In production, use the full PDF.js library

if (typeof window !== 'undefined') {
    window.pdfjsLib = {
        GlobalWorkerOptions: {
            workerSrc: ''
        },
        
        getDocument: function(url) {
            return {
                promise: new Promise(function(resolve, reject) {
                    // Simulate PDF loading
                    setTimeout(function() {
                        resolve({
                            numPages: 1,
                            getPage: function(pageNum) {
                                return Promise.resolve({
                                    getViewport: function(options) {
                                        return {
                                            width: 595,
                                            height: 842,
                                            scale: options.scale || 1.0
                                        };
                                    },
                                    render: function(renderContext) {
                                        const canvas = renderContext.canvasContext.canvas;
                                        const ctx = renderContext.canvasContext;
                                        const viewport = renderContext.viewport;
                                        
                                        // Draw a simple PDF placeholder
                                        ctx.fillStyle = '#ffffff';
                                        ctx.fillRect(0, 0, viewport.width, viewport.height);
                                        
                                        ctx.strokeStyle = '#cccccc';
                                        ctx.strokeRect(0, 0, viewport.width, viewport.height);
                                        
                                        ctx.fillStyle = '#666666';
                                        ctx.font = '16px Arial';
                                        ctx.textAlign = 'center';
                                        ctx.fillText('PDFg¹	e-...', viewport.width / 2, viewport.height / 2);
                                        ctx.fillText('Ë(Œt„PDF.js«åcºo:PDF', viewport.width / 2, viewport.height / 2 + 30);
                                        
                                        return {
                                            promise: Promise.resolve()
                                        };
                                    }
                                });
                            }
                        });
                    }, 500);
                })
            };
        }
    };
    
    // Set default worker source
    window.pdfjsLib.GlobalWorkerOptions.workerSrc = '/wp-content/plugins/wp-pdf-signature/assets/js/pdf.worker.min.js';
}